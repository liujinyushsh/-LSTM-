# 骨铣削实验

1. 使用labelme工具手动分割图像，具体教程参见http://t.csdn.cn/cAzdN

2. 使用image_process.py处理分割图像，输入图像为黑色背景的分割图像，输出为按列扫描，从左往右的皮质骨占比变化曲线。

3. 使用data_processing2.m预处理数据，该代码实现得具体操作为对激光传感器采集得深度信息进行移动平均滤波，对准铣削前后两次深度测量信息，作差得出铣削深度曲线，最后保存加速度，声压信号，以及深度，占比。

   注：data_processing2.m代码中针对一次实验中的两次铣削做了区分，可能需要修改

4. 使用data_segmentation将数据按帧切分（采样频率20kHz，每2000个数，即0.1s划分为一个样本）

5. 使用data_format_change.m将数据做一次小的转换，然后手动保存放置到data_matlab_format中

说明：代码中频繁出现的缩写dep = depth深度；dep_pro = depth proportion深度占比

+++

**接下来进入神经网络训练阶段**

1. 所有matlab神经网络训练有关代码均存放在data_matlab_format中

2. net_depth.m是预测深度的网络，net_proportion.m是预测占比的网络。

   + 代码首先加载特征和标签
   + 然后加载网络（网络需先用深度网络设计器设计好，然后导出到工作区，导出到工作区之后可重复调用）
   + 然后进行数据增强（若数据量足够可不进行数据增强）
   + 然后划分训练集与测试集，调用了自定义的mix_divide函数
   + 最后开启训练与预测

   注：文件末尾%test是测试用的例子，无需执行